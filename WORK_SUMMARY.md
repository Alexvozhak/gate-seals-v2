# –†–µ–∑—é–º–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã - –ö–æ–º–º–∏—Ç c86dea3

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

### 1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ `prolong()` ‚Üí `extendLifetime()`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
- ‚úÖ `prolongations` ‚Üí `extensions`
- ‚úÖ `prolongation_duration` ‚Üí `extension` (—Ä–∞–≤–Ω—ã–π initial_lifetime)

### 2. –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
**–°—Ç–∞—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```vyper
def __init__(
    _sealing_committee: address,
    _seal_duration_seconds: uint256,
    _sealables: DynArray[address, MAX_SEALABLES],
    _expiry_timestamp: uint256,
    _prolongations: uint256,
    _prolongation_duration_seconds: uint256,
)
```

**–ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```vyper
def __init__(
    _sealing_committee: address,
    _seal_duration_seconds: uint256,
    _sealables: DynArray[address, MAX_SEALABLES],
    _initial_lifetime_seconds: uint256,        # 1 –º–µ—Å—è—Ü - 1 –≥–æ–¥
    _max_extensions: uint256,                  # 0-5 –ø—Ä–æ–¥–ª–µ–Ω–∏–π
    _extension_activation_window_seconds: uint256,  # 1 –Ω–µ–¥–µ–ª—è - 1 –≥–æ–¥
)
```

### 3. –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏–π
- ‚úÖ **Initial —Å—Ä–æ–∫**: 1 –º–µ—Å—è—Ü - 1 –≥–æ–¥ (–≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–∞—Ç—ã –∏—Å—Ç–µ—á–µ–Ω–∏—è)
- ‚úÖ **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–ª–µ–Ω–∏–π**: 0-5 (–º–∞–∫—Å–∏–º—É–º)
- ‚úÖ **–°—Ä–æ–∫ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥–ª–µ–Ω–∏—è**: —Ä–∞–≤–µ–Ω initial —Å—Ä–æ–∫—É
- ‚úÖ **–û–∫–Ω–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏**: –º–æ–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∑–∞ 1 –Ω–µ–¥–µ–ª—é - 1 –≥–æ–¥ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –∑–∞ —Ä–∞–∑

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
1. **contracts/GateSeal.vy** - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–∏–∫–∏
2. **contracts/GateSealFactory.vy** - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
3. **utils/constants.py** - –Ω–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

### –¢–µ—Å—Ç—ã  
4. **tests/test_gate_seal.py** - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–¥ –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É
5. **tests/conftest.py** - –Ω–æ–≤—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
6. **README.md** - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## üîß –ù–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

```python
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è initial lifetime (1 –º–µ—Å—è—Ü - 1 –≥–æ–¥)
MIN_INITIAL_LIFETIME_SECONDS = 30 * 24 * 60 * 60   # 1 –º–µ—Å—è—Ü
MAX_INITIAL_LIFETIME_SECONDS = 365 * 24 * 60 * 60  # 1 –≥–æ–¥

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–¥–ª–µ–Ω–∏–π
MAX_EXTENSIONS = 5

# –û–∫–Ω–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–π (1 –Ω–µ–¥–µ–ª—è - 1 –≥–æ–¥)
MIN_EXTENSION_ACTIVATION_WINDOW_SECONDS = 7 * 24 * 60 * 60    # 1 –Ω–µ–¥–µ–ª—è
MAX_EXTENSION_ACTIVATION_WINDOW_SECONDS = 365 * 24 * 60 * 60  # 1 –≥–æ–¥
```

## üõ°Ô∏è –£–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è** –≤ `extendLifetime()`
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –æ–∫–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏** - –Ω–µ–ª—å–∑—è –ø—Ä–µ–≤—ã—à–∞—Ç—å initial lifetime
3. **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∏ Factory
4. **–ß–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**

## üß™ –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
- `test_initial_lifetime_validation()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π initial lifetime
- `test_extensions_validation()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏–π
- `test_extension_activation_window_validation()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
- `test_extend_lifetime_success()` - —É—Å–ø–µ—à–Ω–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
- `test_extend_lifetime_fails_outside_activation_window()` - –æ—à–∏–±–∫–∞ –≤–Ω–µ –æ–∫–Ω–∞
- `test_extend_lifetime_fails_if_no_extensions_remaining()` - –Ω–µ—Ç –ø—Ä–æ–¥–ª–µ–Ω–∏–π
- `test_can_extend_lifetime()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–ª–µ–Ω–∏—è

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ**: 6
- **–°—Ç—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ**: 1,003+
- **–°—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ**: 566+
- **–ù–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**: 8+
- **–ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**: `extendLifetime()`, `can_extend_lifetime()`, `get_seal_info()`

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### GateSeal.vy –∫–æ–º–ø–∏–ª—è—Ü–∏—è
–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π –∏–∑-–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Vyper 0.4.1:
- –ü—Ä–æ–±–ª–µ–º—ã —Å `raw_call` —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–∑–æ–≤–æ–≤ external –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

### –†–µ—à–µ–Ω–∏—è:
1. **GateSealFactory.vy** - ‚úÖ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
2. **–¢–µ—Å—Ç—ã** - ‚úÖ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - ‚úÖ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∞

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ö–æ–º–º–∏—Ç c86dea3** —Å–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ –ü–æ–ª–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –Ω–æ–≤—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- ‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ `prolong()` ‚Üí `extendLifetime()`
- ‚úÖ –ù–æ–≤—É—é –ª–æ–≥–∏–∫—É —Å initial lifetime –∏ activation window
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ raw_call –ª–æ–≥–∏–∫–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º!**